<html>
<head>
<title> RanDemise - Random Table Toolkit</title>
<script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script>
<script src="src.js" type="text/javascript"></script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<style type="text/css">
	
</style>
<body>

<div class="container" id = "cont">
<div class="page-header">
	<h1>RanDemise - Random Table Toolbox</h1>
</div>
</div>

<script type="text/javascript">

class treeState{
	constructor(){
		this.numTree = 0;
		this.numTables = 0;
		this.numEvents = 0;
	}
	addTree(){
		this.numTree += 1;
	}
	addTable(){
		this.numTables += 1;
	}
	addEvent(){
		this.numEvents += 1;
	}

	getTreeID(){
		return this.numTree;
	}
	getTableID(){
		return this.numTables;
	}
	getEventID(){
		return this.numEvents;
	}
}

class tableTree {
	constructor(name, state){
		this.name = name;
		this.state = state;
		this.id = state.getTreeID();
		this.headTable = null;
		this.tables=[];
		state.addTree();
	}

	addTable(tb){
		if (this.tables.length < 1){
			this.headTable = tb;
		}
		this.tables.push(tb);
	}
}
class eventTable{
	constructor(name, state, tree){
		this.state = state;
		this.tree = tree;

		this.name = name;
		this.id = state.getTableID();
		this.events =[];

		state.addTable();
		tree.addTable(this);
	}

	addEvent(ev){
		this.events.push(ev);
	}
}
class event{
	constructor(name, state,table){
		this.state = state;
		this.table = table;

		this.name = name;
		this.id = state.getEventID();

		state.addEvent();
		table.addEvent(this);
	}
}

class rollState{
	constructor(tr){
		this.tree = tr;
	}
	
}
class rollInstance{
	constructor(rs,tb){
		this.curTable = tb;
		this.conditions = [];
		this.eventsRolled = [];
	}

	rollEvent(probs){
		var elID = 0;
		var randArr =[];

		probs.forEach(function(d){
			var numEl = Math.round(d*100);
			for (var i = 0; i <= numEl; i++) {
				randArr.push(elID);
			}
			elID++;
		});

		var randomInd = Math.round(Math.Random()*randArr.length);
		return this.curTable.events[randomInd];
	}
}

var ts = new treeState();
var tabTr = new tableTree("test",ts);
var tab = new eventTable("test",ts,tabTr);
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</body>